apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: smart-home-prod

bases:
  - ../../base

patchesStrategicMerge:
  - deployment-patch.yaml

replicas:
  - name: web
    count: 3
  - name: server
    count: 3

configMapGenerator:
  - name: server-config
    behavior: merge
    literals:
      - node-env=production
      - log-level=info
      - cors-origins=https://your-domain.com
  - name: web-config
    behavior: merge
    literals:
      - api-url=/api

images:
  - name: smart-home-server
    newName: your-registry/smart-home-server
    newTag: v1.0.0
  - name: smart-home-web
    newName: your-registry/smart-home-web
    newTag: v1.0.0